export type ThemePropertyValue = string | number | boolean;
export type ThemePropertyRawValue =
  | string
  | number
  | boolean
  | OsDependentValue;
export type OS = "windows" | "linux" | "mac";
export type OsDependentValueKey = `os.${OS}` | "os.default";
export type OsDependentValue = RequireAtLeastOne<
  {
    [key in OsDependentValueKey]?: ThemePropertyValue;
  }
>;
type RequireAtLeastOne<T, Keys extends keyof T = keyof T> = Pick<
  T,
  Exclude<keyof T, Keys>
> &
  {
    [K in Keys]-?: Required<Pick<T, K>> & Partial<Pick<T, Exclude<Keys, K>>>;
  }[Keys];

export interface IconResolver {
  resolveThemeIcon(icon: string): Promise<string>;

  resolvePlatformIcon(srcRelativeIconPath: string): Promise<string>;
}

type ThemeProperties = Record<string, ThemePropertyRawValue>;

export type ThemeJson = {
  name: string;
  dark: boolean;
  author?: string;
  editorScheme?: string;

  colors?: Record<string, string>;
  ui: { "*": ThemeProperties } & {
    [key: string]: ThemeProperties | ThemePropertyRawValue;
  };
};

export type KnownThemePropertyPath =
  // added manually
  | "SpeedSearch.errorForeground"

  // Generated automatically based on a bunch of existing .theme.json files:
  | "*.acceleratorForeground"
  | "*.acceleratorSelectionForeground"
  | "*.background"
  | "*.borderColor"
  | "*.caretForeground"
  | "*.disabledBackground"
  | "*.disabledBorderColor"
  | "*.disabledForeground"
  | "*.disabledText"
  | "*.errorForeground"
  | "*.focusColor"
  | "*.focusedBorderColor"
  | "*.foreground"
  | "*.hoverBorderColor"
  | "*.inactiveBackground"
  | "*.inactiveForeground"
  | "*.infoForeground"
  | "*.lineSeparatorColor"
  | "*.modifiedItemForeground"
  | "*.pressedBorderColor"
  | "*.selectedForeground"
  | "*.selectionBackground"
  | "*.selectionBackgroundInactive"
  | "*.selectionForeground"
  | "*.selectionForegroundInactive"
  | "*.selectionInactiveBackground"
  | "*.selectionInactiveForeground"
  | "*.separatorColor"
  | "*.separatorForeground"
  | "*.textBackground"
  | "*.textForeground"
  | "ActionButton.focusedBorderColor"
  | "ActionButton.hoverBackground"
  | "ActionButton.hoverBorderColor"
  | "ActionButton.pressedBackground"
  | "ActionButton.pressedBorderColor"
  | "ActionsList.cellBorderInsets"
  | "ActionsList.icon.gap"
  | "ActionsList.mnemonic.icon.gap"
  | "ActionsList.mnemonicsBorderInsets"
  | "AssignedMnemonic.background"
  | "AssignedMnemonic.borderColor"
  | "AssignedMnemonic.foreground"
  | "AvailableMnemonic.background"
  | "AvailableMnemonic.borderColor"
  | "AvailableMnemonic.foreground"
  | "BookmarkIcon.background"
  | "Borders.ContrastBorderColor"
  | "Borders.color"
  | "Button.UI"
  | "Button.arc"
  | "Button.border"
  | "Button.darcula.disabledText.shadow"
  | "Button.default.endBackground"
  | "Button.default.endBorderColor"
  | "Button.default.focusColor"
  | "Button.default.focusedBorderColor"
  | "Button.default.foreground"
  | "Button.default.shadowColor"
  | "Button.default.startBackground"
  | "Button.default.startBorderColor"
  | "Button.disabledBorderColor"
  | "Button.disabledText"
  | "Button.endBackground"
  | "Button.endBorderColor"
  | "Button.focusedBorderColor"
  | "Button.paintShadow"
  | "Button.shadowColor"
  | "Button.shadowWidth"
  | "Button.startBackground"
  | "Button.startBorderColor"
  | "CellEditor.border.width"
  | "CheckBox.UI"
  | "CheckBox.border"
  | "CheckBox.borderInsets"
  | "CheckBoxMenuItem.UI"
  | "CheckBoxMenuItem.borderPainted"
  | "ComboBox.ArrowButton.background"
  | "ComboBox.ArrowButton.disabledIconColor"
  | "ComboBox.ArrowButton.iconColor"
  | "ComboBox.ArrowButton.nonEditableBackground"
  | "ComboBox.UI"
  | "ComboBox.background"
  | "ComboBox.disabledBackground"
  | "ComboBox.disabledForeground"
  | "ComboBox.modifiedItemForeground"
  | "ComboBox.nonEditableBackground"
  | "ComboBox.padding"
  | "ComboBoxButton.background"
  | "ComboPopup.border"
  | "CompletionPopup.matchForeground"
  | "CompletionPopup.matchSelectionForeground"
  | "CompletionPopup.nonFocusedState"
  | "CompletionPopup.selectionBackground"
  | "CompletionPopup.selectionInactiveBackground"
  | "Component.arc"
  | "Component.borderColor"
  | "Component.disabledBorderColor"
  | "Component.errorFocusColor"
  | "Component.focusColor"
  | "Component.focusWidth"
  | "Component.focusedBorderColor"
  | "Component.hoverIconColor"
  | "Component.iconColor"
  | "Component.inactiveErrorFocusColor"
  | "Component.inactiveWarningFocusColor"
  | "Component.infoForeground"
  | "Component.warningFocusColor"
  | "Counter.background"
  | "Counter.foreground"
  | "CurrentMnemonic.background"
  | "CurrentMnemonic.borderColor"
  | "CurrentMnemonic.foreground"
  | "DebuggerPopup.borderColor"
  | "DebuggerTabs.selectedBackground"
  | "DefaultTabs.background"
  | "DefaultTabs.hoverBackground"
  | "DefaultTabs.inactiveUnderlineColor"
  | "DefaultTabs.underlineColor"
  | "DefaultTabs.underlineHeight"
  | "DragAndDrop.areaBackground"
  | "DragAndDrop.areaBorderColor"
  | "DragAndDrop.areaForeground"
  | "Editor.background"
  | "Editor.foreground"
  | "Editor.shortcutForeground"
  | "EditorPane.UI"
  | "EditorPane.background"
  | "EditorPane.inactiveBackground"
  | "EditorPane.inactiveForeground"
  | "EditorTabs.inactiveColoredFileBackground"
  | "EditorTabs.inactiveMaskColor"
  | "EditorTabs.selectedBackground"
  | "EditorTabs.selectedForeground"
  | "EditorTabs.tabInsets"
  | "EditorTabs.underlineColor"
  | "EditorTabs.underlineHeight"
  | "EditorTabs.underlinedTabBackground"
  | "FileColor.Blue"
  | "FileColor.Green"
  | "FileColor.Orange"
  | "FileColor.Rose"
  | "FileColor.Violet"
  | "FileColor.Yellow"
  | "FileView.fileIcon"
  | "FlameGraph.JVMBackground"
  | "FlameGraph.JVMFocusBackground"
  | "FlameGraph.JVMFocusSearchNotMatchedBackground"
  | "FlameGraph.JVMFocusedFrameForeground"
  | "FlameGraph.JVMFrameForeground"
  | "FlameGraph.JVMSearchNotMatchedBackground"
  | "FlameGraph.nativeBackground"
  | "FlameGraph.nativeFocusBackground"
  | "FlameGraph.nativeFocusSearchNotMatchedBackground"
  | "FlameGraph.nativeFocusedFrameForeground"
  | "FlameGraph.nativeFrameForeground"
  | "FlameGraph.nativeSearchNotMatchedBackground"
  | "FlameGraph.parentBackground"
  | "FlameGraph.parentFocusBackground"
  | "FlameGraph.parentFocusSearchNotMatchedBackground"
  | "FlameGraph.parentFocusedFrameForeground"
  | "FlameGraph.parentFrameForeground"
  | "FlameGraph.parentSearchNotMatchedBackground"
  | "Focus.color"
  | "FormattedTextField.UI"
  | "FormattedTextField.background"
  | "FormattedTextField.border"
  | "Group.separatorColor"
  | "HelpTooltip.defaultTextBorderInsets"
  | "HelpTooltip.descriptionSizeDelta"
  | "HelpTooltip.fontSizeDelta"
  | "HelpTooltip.mouseCursorOffset"
  | "HelpTooltip.smallTextBorderInsets"
  | "HelpTooltip.xOffset"
  | "HelpTooltip.yOffset"
  | "Hyperlink.linkColor"
  | "InplaceRefactoringPopup.background"
  | "InplaceRefactoringPopup.borderColor"
  | "InternalFrame.UI"
  | "InternalFrame.border"
  | "InternalFrame.closeIcon"
  | "InternalFrame.iconifyIcon"
  | "InternalFrame.maximizeIcon"
  | "InternalFrame.minimizeIcon"
  | "Label.UI"
  | "Label.disabledForeground"
  | "Label.errorForeground"
  | "Label.foreground"
  | "Label.infoForeground"
  | "Label.selectedDisabledForeground"
  | "Label.selectedForeground"
  | "Link.activeForeground"
  | "Link.hoverForeground"
  | "Link.pressedForeground"
  | "Link.secondaryForeground"
  | "Link.visitedForeground"
  | "List.UI"
  | "List.background"
  | "List.focusCellHighlightBorder"
  | "List.rowHeight"
  | "MemoryIndicator.allocatedBackground"
  | "MemoryIndicator.usedBackground"
  | "Menu.border"
  | "Menu.borderColor"
  | "Menu.maxGutterIconWidth"
  | "Menu.opaque"
  | "Menu.separatorColor"
  | "MenuBar.UI"
  | "MenuBar.border"
  | "MenuBar.borderColor"
  | "MenuBar.disabledBackground"
  | "MenuItem.acceleratorDelimiter"
  | "MenuItem.acceleratorForeground"
  | "MenuItem.acceleratorSelectionForeground"
  | "MenuItem.border"
  | "MenuItem.disabledForeground"
  | "MenuItem.maxGutterIconWidth"
  | "MnemonicIcon.background"
  | "MnemonicIcon.borderColor"
  | "MnemonicIcon.foreground"
  | "NavBar.borderColor"
  | "NewClass.Panel.background"
  | "NewClass.SearchField.background"
  | "NewClass.separatorWidth"
  | "Notification.MoreButton.innerBorderColor"
  | "Notification.ToolWindow.errorBackground"
  | "Notification.ToolWindow.errorBorderColor"
  | "Notification.ToolWindow.errorForeground"
  | "Notification.ToolWindow.informativeBackground"
  | "Notification.ToolWindow.informativeBorderColor"
  | "Notification.ToolWindow.informativeForeground"
  | "Notification.ToolWindow.warningBackground"
  | "Notification.ToolWindow.warningBorderColor"
  | "Notification.ToolWindow.warningForeground"
  | "Notification.background"
  | "Notification.borderColor"
  | "Notification.errorBackground"
  | "Notification.errorBorderColor"
  | "Notification.errorForeground"
  | "OptionButton.default.separatorColor"
  | "OptionButton.separatorColor"
  | "OptionButtonUI"
  | "OptionPane.errorIcon"
  | "OptionPane.informationIcon"
  | "OptionPane.messageForeground"
  | "OptionPane.questionIcon"
  | "OptionPane.warningIcon"
  | "Panel.background"
  | "Panel.mouseShortcutBackground"
  | "ParameterInfo.background"
  | "ParameterInfo.currentOverloadBackground"
  | "ParameterInfo.currentParameterForeground"
  | "ParameterInfo.foreground"
  | "PasswordField.UI"
  | "PasswordField.background"
  | "PasswordField.border"
  | "Plugins.Button.installBorderColor"
  | "Plugins.Button.installFillBackground"
  | "Plugins.Button.installFillForeground"
  | "Plugins.Button.installForeground"
  | "Plugins.Button.updateBackground"
  | "Plugins.Button.updateForeground"
  | "Plugins.SearchField.borderColor"
  | "Plugins.SectionHeader.background"
  | "Plugins.Tab.hoverBackground"
  | "Plugins.Tab.selectedBackground"
  | "Plugins.Tab.selectedForeground"
  | "Plugins.lightSelectionBackground"
  | "Plugins.tagBackground"
  | "Plugins.tagForeground"
  | "Popup.Advertiser.background"
  | "Popup.Advertiser.borderColor"
  | "Popup.Advertiser.borderInsets"
  | "Popup.Advertiser.foreground"
  | "Popup.Header.activeBackground"
  | "Popup.Header.inactiveBackground"
  | "Popup.Toolbar.background"
  | "Popup.Toolbar.borderColor"
  | "Popup.borderColor"
  | "Popup.inactiveBorderColor"
  | "Popup.paintBorder"
  | "Popup.separatorColor"
  | "Popup.separatorForeground"
  | "PopupMenu.UI"
  | "PopupMenu.border"
  | "PopupMenu.borderInsets"
  | "PopupMenu.borderWidth"
  | "PopupMenu.translucentBackground"
  | "PopupMenuSeparator.UI"
  | "PopupMenuSeparator.height"
  | "PopupMenuSeparator.stripeIndent"
  | "PopupMenuSeparator.stripeWidth"
  | "PopupMenuSeparatorUI"
  | "ProgressBar.UI"
  | "ProgressBar.border"
  | "ProgressBar.failedColor"
  | "ProgressBar.failedEndColor"
  | "ProgressBar.foreground"
  | "ProgressBar.indeterminateEndColor"
  | "ProgressBar.indeterminateStartColor"
  | "ProgressBar.passedColor"
  | "ProgressBar.passedEndColor"
  | "ProgressBar.progressColor"
  | "ProgressBar.trackColor"
  | "RadioButton.UI"
  | "RadioButton.border"
  | "RadioButton.borderInsets"
  | "RadioButton.darcula.selectionDisabledColor"
  | "RadioButton.darcula.selectionDisabledShadowColor"
  | "RadioButton.darcula.selectionEnabledColor"
  | "RadioButton.darcula.selectionEnabledShadowColor"
  | "RadioButton.iconTextGap"
  | "RadioButtonMenuItem.UI"
  | "RadioButtonMenuItem.borderPainted"
  | "RootPaneUI"
  | "ScrollBar.Mac.Transparent.hoverThumbBorderColor"
  | "ScrollBar.Mac.Transparent.hoverThumbColor"
  | "ScrollBar.Mac.Transparent.hoverTrackColor"
  | "ScrollBar.Mac.Transparent.thumbBorderColor"
  | "ScrollBar.Mac.Transparent.thumbColor"
  | "ScrollBar.Mac.hoverThumbBorderColor"
  | "ScrollBar.Mac.hoverThumbColor"
  | "ScrollBar.Mac.hoverTrackColor"
  | "ScrollBar.Mac.thumbBorderColor"
  | "ScrollBar.Mac.thumbColor"
  | "ScrollBar.Mac.trackColor"
  | "ScrollBar.Transparent.hoverThumbBorderColor"
  | "ScrollBar.Transparent.hoverThumbColor"
  | "ScrollBar.Transparent.hoverTrackColor"
  | "ScrollBar.Transparent.thumbBorderColor"
  | "ScrollBar.Transparent.thumbColor"
  | "ScrollBar.UI"
  | "ScrollBar.background"
  | "ScrollBar.hoverThumbBorderColor"
  | "ScrollBar.hoverThumbColor"
  | "ScrollBar.hoverTrackColor"
  | "ScrollBar.thumbBorderColor"
  | "ScrollBar.thumbColor"
  | "ScrollBar.trackColor"
  | "SearchEverywhere.Advertiser.background"
  | "SearchEverywhere.Advertiser.borderInsets"
  | "SearchEverywhere.Advertiser.foreground"
  | "SearchEverywhere.Header.background"
  | "SearchEverywhere.List.separatorColor"
  | "SearchEverywhere.SearchField.background"
  | "SearchEverywhere.SearchField.borderColor"
  | "SearchEverywhere.SearchField.infoForeground"
  | "SearchEverywhere.Tab.selectedBackground"
  | "SearchEverywhere.Tab.selectedForeground"
  | "SearchMatch.endBackground"
  | "SearchMatch.startBackground"
  | "Separator.UI"
  | "Separator.separatorColor"
  | "Slider.UI"
  | "Slider.tickColor"
  | "SpeedSearch.background"
  | "SpeedSearch.borderColor"
  | "SpeedSearch.foreground"
  | "Spinner.UI"
  | "Spinner.arrowButtonInsets"
  | "Spinner.background"
  | "Spinner.border"
  | "Spinner.darcula.disabledButtonColor"
  | "Spinner.darcula.enabledButtonColor"
  | "Spinner.editorBorderPainted"
  | "SplitPane.UI"
  | "SplitPane.highlight"
  | "StatusBar.LightEditBackground"
  | "StatusBar.borderColor"
  | "StatusBar.hoverBackground"
  | "TabbedPane.UI"
  | "TabbedPane.contentAreaColor"
  | "TabbedPane.contentBorderInsets"
  | "TabbedPane.darkShadow"
  | "TabbedPane.disabledForeground"
  | "TabbedPane.disabledUnderlineColor"
  | "TabbedPane.focusColor"
  | "TabbedPane.highlight"
  | "TabbedPane.hoverColor"
  | "TabbedPane.labelShift"
  | "TabbedPane.light"
  | "TabbedPane.selectHighlight"
  | "TabbedPane.selected"
  | "TabbedPane.selectedLabelShift"
  | "TabbedPane.selectedTabPadInsets"
  | "TabbedPane.shadow"
  | "TabbedPane.tabAreaInsets"
  | "TabbedPane.tabFillStyle"
  | "TabbedPane.tabHeight"
  | "TabbedPane.tabInsets"
  | "TabbedPane.tabSelectionHeight"
  | "TabbedPane.tabsOverlapBorder"
  | "TabbedPane.underlineColor"
  | "Table.ascendingSortIcon"
  | "Table.background"
  | "Table.cellNoFocusBorder"
  | "Table.descendingSortIcon"
  | "Table.focusCellHighlightBorder"
  | "Table.focusSelectedCellHighlightBorder"
  | "Table.gridColor"
  | "Table.lightSelectionBackground"
  | "Table.lightSelectionForeground"
  | "Table.lightSelectionInactiveBackground"
  | "Table.lightSelectionInactiveForeground"
  | "Table.rowHeight"
  | "Table.stripeColor"
  | "TableHeader.UI"
  | "TableHeader.background"
  | "TableHeader.bottomSeparatorColor"
  | "TableHeader.cellBorder"
  | "TableHeader.height"
  | "TableHeader.separatorColor"
  | "TextArea.UI"
  | "TextArea.background"
  | "TextArea.selectionForeground"
  | "TextField.UI"
  | "TextField.background"
  | "TextField.border"
  | "TextField.darcula.error.active"
  | "TextField.darcula.error.inactive"
  | "TextField.disabledBackground"
  | "TitledBorder.titleColor"
  | "ToggleButton.UI"
  | "ToggleButton.border"
  | "ToggleButton.borderColor"
  | "ToggleButton.buttonColor"
  | "ToggleButton.offBackground"
  | "ToggleButton.offForeground"
  | "ToggleButton.onBackground"
  | "ToggleButton.onForeground"
  | "ToolTip.Actions.background"
  | "ToolTip.background"
  | "ToolTip.foreground"
  | "ToolTip.infoForeground"
  | "ToolTip.paintBorder"
  | "ToolWindow.Button.hoverBackground"
  | "ToolWindow.Button.selectedBackground"
  | "ToolWindow.Button.selectedForeground"
  | "ToolWindow.Header.background"
  | "ToolWindow.Header.font.size.offset"
  | "ToolWindow.Header.inactiveBackground"
  | "ToolWindow.HeaderCloseButton.background"
  | "ToolWindow.HeaderTab.hoverBackground"
  | "ToolWindow.HeaderTab.hoverInactiveBackground"
  | "ToolWindow.HeaderTab.inactiveUnderlineColor"
  | "ToolWindow.HeaderTab.selectedBackground"
  | "ToolWindow.HeaderTab.selectedInactiveBackground"
  | "ToolWindow.HeaderTab.underlineColor"
  | "ToolWindow.HeaderTab.underlineHeight"
  | "Tree.UI"
  | "Tree.background"
  | "Tree.border"
  | "Tree.collapsedIcon"
  | "Tree.collapsedSelectedIcon"
  | "Tree.expandedIcon"
  | "Tree.expandedSelectedIcon"
  | "Tree.hash"
  | "Tree.leftChildIndent"
  | "Tree.modifiedItemForeground"
  | "Tree.paintLines"
  | "Tree.rightChildIndent"
  | "Tree.rowHeight"
  | "Tree.selectionBorderColor"
  | "Tree.textBackground"
  | "ValidationTooltip.errorBackground"
  | "ValidationTooltip.errorBorderColor"
  | "ValidationTooltip.maxWidth"
  | "ValidationTooltip.warningBackground"
  | "ValidationTooltip.warningBorderColor"
  | "VersionControl.FileHistory.Commit.selectedBranchBackground"
  | "VersionControl.Log.Commit.currentBranchBackground"
  | "VersionControl.Log.Commit.unmatchedForeground"
  | "VersionControl.RefLabel.backgroundBase"
  | "VersionControl.RefLabel.backgroundBrightness"
  | "WelcomeScreen.Projects.selectionInactiveBackground"
  | "WelcomeScreen.separatorColor"
  | "Window.border"
  | "activeCaption"
  | "control"
  | "controlText"
  | "grayFilter"
  | "inactiveCaption"
  | "infoText"
  | "text"
  | "text.grayFilter"
  | "textText"
  | "window";
